/*! 27-06-2016 */
!function(a){"use strict";var b=function(){},c=a.escape,d=a.unescape,e=6,f="/*",g="*/",h={},i="localcheck-",j=5e3,k=a.localStorage||{setItem:b,getItem:b,removeItem:b,clear:b,length:0},l=function(){var a={},b={isOver:!1,done:function(c){return b.isOver=!0,a.success=c,b.data&&c&&c.call(this,b.data),this},fail:function(c){return b.isOver=!0,a.fail=c,a.failargs&&c&&c.call(this,a.failargs),this}},c={resolve:function(c){a.success?a.success.call(this,c):(b.isOver=!0,b.data=c),b.callback&&b.callback()},reject:function(c){a.fail?a.fail.call(this,c):(b.isOver=!0,b.error=c),b.callback&&b.callback()},promise:function(){return b}};return c};l.all=function(a){for(var b,c=l(),d=[],e=function(){for(var e=a.length-1;e>-1;e--)b=a[e],b.isOver&&(a.splice(e,1),d.push(b.data)),a.length<1&&c.resolve(d)},f=a.length-1;f>-1;f--)a[f].callback=e;return e(),c.promise()};var m=function(a){var b=m.class2type||{},c=b.toString,d="Boolean Number String Function Array Date RegExp Object Error".split(" ");if(!m.class2type){for(var e=0,f=d.length;f>e;e++)b["[object "+d[e]+"]"]=d[e].toLowerCase();m.class2type=b}return b[c.call(a)]},n={};n.getXHR=function(){return a.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},n.send=function(a,c){c=c||{};var d=this.getXHR(),e=c.success||b,f=c.error||b,g=c.timeout||0,h=0,i=function(a,b){h&&clearTimeout(h),a>=200&&300>a||304===a?e({content:d.responseText,type:d.getResponseHeader("content-type")},d):f({code:a,msg:b},d)};return d.open("GET",a,!0),d.onreadystatechange=function(){4==d.readyState&&i(d.status,"status error")},g>0&&(h=setTimeout(function(){d.abort("timeout"),i(-100,"timeout")},g)),d.send(),d};var o=function(a,b){if(!a)return"";var d,h,i,j,k=[];for(d in b)j=m(b[d]),!b.hasOwnProperty(d)||"string"!=j&&"number"!=j||k.push(c(d)+"="+c(b[d]));return h=k.join("&"),i=h.length,a+=f+h+"#"+new Array(e-(""+i).length+1).join("0")+i+g},p=function(a){if(!a)return!1;var b=new RegExp("#[\\d]{"+e+"}"+g.replace("*","\\*").replace("/","/")+"$");if(!b.test(a))return!1;var c,h,i,j=-g.length-e,k=a.substr(j,e),l={};k=parseInt(k,10),c=a.substr(j-k-1,k),h=c.split("&");for(var m=h.length-1;m>-1;m--)i=h[m].split("="),l[d(i[0])]=d(i[1]);return{content:a.substr(0,a.length-k-f.length+j-1),ext:l}},q=function(a){var b=a?new Date(a):new Date,c=b.getMonth()+1,d=b.getDate(),e=b.getFullYear();return e+"-"+(10>c?"0"+c:c)+"-"+(10>d?"0"+d:d)},r=function(a){if(!(k.length<1)){var b,c,d=[],e=+new Date;for(b in localStorage)0===b.indexOf(i)&&(c=p(localStorage[b]),!c||c.ext.expire<=e?k.removeItem(b):(c.ext._key=b,d.push(c.ext)));if(a&&!(d.length<1)){d.sort(function(a,b){return a.stamp-b.stamp});var f=d[0],g=q(),h=q(f.stamp);if(h==g)return k.removeItem(f._key);for(var j=d.length;j>-1;j--)if(f=d[j],h==q(f.stamp))return k.removeItem(f._key)}}},s=function(a,b,c){b=b||"",a=i+a,c=c||{};try{return localStorage.setItem(a,o(b,c)),!0}catch(d){return d.name.toUpperCase().indexOf("QUOTA")>=0?(r(!0),s(a,b,c)):!1}},t=function(a){throw new Error(a)},u={};u.isValidItem=null;var v=function(b){if(b.content)try{(a.execScript||function(b){a.eval.call(a,b)})(b.content)}catch(c){u.remove(b.ext.key),t(c.msg+"\n source file:"+b.ext.url)}else t("inject file["+b.ext.url+"] content null")},w={"default":v},x=function(a){return a.ext.type&&w[a.ext.type]?w[a.ext.type](a):w["default"](a)};u.get=function(a){a=i+a;var b=p(k.getItem(a));return b||u.remove(a),b},u.set=function(a,b,c){if(a){var d=z(c||{},b);return s(a,b,d)}return!1},u.remove=function(a){return a=i+a,k.removeItem(a),this},u.clear=function(a){if(a)r();else for(var b in localStorage)0===b.indexOf(i)&&k.removeItem(b);return this},u.clearOther=function(){for(var a in localStorage)0!==a.indexOf(i)&&k.removeItem(a);return this};var y=function(a,b){return!a||a.ext.expire-+new Date<0||b.unique!=a.ext.unique||u.isValidItem&&!u.isValidItem(a,b)},z=function(a,b){b=b||{};var c=+new Date;return a.originalType=b.type||"",a.type=a.type||a.originalType,a.stamp=c,a.expire=c+60*(a.expire||j)*60*1e3,a.hasOwnProperty("unique")&&(a.unique=a.unique||""),a},A=function(a,b){var c=l(),d=a.formatFn,e="",f=a._url;return delete a._url,n.send(f,{success:function(b){e=d?d(b.content):b.content,!a.skipCache&&e&&u.set(a.key,e,a),c.resolve({ext:a,content:e})},error:function(a){return b?c.resolve(b):void c.reject(a,b)}}),c.promise()},B=function(a){if(a.url){var b,c,d;if(a.key=a.key||a.url,b=u.get(a.key),a.execute=a.execute!==!1,d=y(b,a),b&&b.ext&&(b.ext.type=a.type||b.ext.originalType,b.ext.execute=a.execute),a._url=a.url,a.live||d)a.unique&&(a._url+=(a.url.indexOf("?")>0?"&":"?")+"localcheck-unique="+a.unique),c=A(a,b);else{var e=l();e.resolve(b),c=e.promise()}return c}},C=function(a,b){var c=m(a);if("string"==c)b[a]={url:a};else if("array"==c)for(var d=0,e=a.length;e>d;d++)C(a[d],b);else"object"==c&&a.url&&(b[a.url]=a)};return u.require=function(){if(!(arguments.length<1)){for(var a,b=l(),c={},d=0,e=arguments.length;e>d;d++)a=arguments[d],C(a,c);var f=[];for(var g in c)c.hasOwnProperty(g)&&f.push(B(c[g]));return l.all(f).done(function(a){for(var c=0,d=a.length;d>c;c++)a[c]&&a[c].ext.execute&&x(a[c]);b.resolve(1==a.length?a[0]:a)}),b.promise()}},u.addHandler=function(a,b){var c=m(a);"array"!=c&&(a=[a]);for(var d=0,e=a.length;e>d;d++)w[a[d]]=b},u.removeHandler=function(a){u.addHandler(a,void 0)},u.setOption=function(a,b){var c={};"string"==m(a)?c[a]=b:c=a;for(var d in c)c.hasOwnProperty(d)&&(h[d]=c[d])},u.clear(!0),a.LocalCheck=u,u}(this,document);