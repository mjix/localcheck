/*! localcheck.js 05-05-2016 */
!function(a){"use strict";var b=function(){},c=a.escape,d=a.unescape,e=6,f="/*",g="*/",h="localcheck-",i=5e3,j=a.localStorage||{setItem:b,getItem:b,removeItem:b,clear:b,length:0},k=function(){var a={},b={isOver:!1,done:function(c){b.isOver=!0,a.success=c,b.data&&c&&c.call(this,b.data)},fail:function(c){b.isOver=!0,a.fail=c,a.failargs&&c&&c.call(this,a.failargs)}},c={resolve:function(c){a.success?a.success.call(this,c):(b.isOver=!0,b.data=c),b.callback&&b.callback()},reject:function(c){a.fail?a.fail.call(this,c):(b.isOver=!0,b.error=c),b.callback&&b.callback()},promise:function(){return b}};return c};k.all=function(a){for(var b,c=k(),d=[],e=function(){for(var e=a.length-1;e>-1;e--)b=a[e],b.isOver&&(a.splice(e,1),d.push(b.data)),a.length<1&&c.resolve(d)},f=a.length-1;f>-1;f--)a[f].callback=e;return e(),c.promise()};var l=function(a){var b=l.class2type||{},c=b.toString,d="Boolean Number String Function Array Date RegExp Object Error".split(" ");if(!l.class2type){for(var e=0,f=d.length;f>e;e++)b["[object "+d[e]+"]"]=d[e].toLowerCase();l.class2type=b}return b[c.call(a)]},m={};m.getXHR=function(){return a.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},m.send=function(a,c){c=c||{};var d=this.getXHR(),e=c.success||b,f=c.error||b,g=c.timeout||0,h=0,i=function(a,b){h&&clearTimeout(h),a>=200&&300>a||304===a?e({content:d.responseText,type:d.getResponseHeader("content-type")},d):f({code:a,msg:b},d)};return d.open("GET",a,!0),d.onreadystatechange=function(){4==d.readyState&&i(d.status,"status error")},g>0&&(h=setTimeout(function(){d.abort("timeout"),i(-100,"timeout")},g)),d.send(),d};var n=function(a,b){if(!a)return"";var d,h,i,j=[];for(d in b)b.hasOwnProperty(d)&&j.push(c(d)+"="+c(b[d]));return h=j.join("&"),i=h.length,a+=f+h+"#"+new Array(e-(""+i).length+1).join("0")+i+g},o=function(a){if(!a)return!1;var b,c,h,i=-g.length-e,j=a.substr(i,e),k={};j=parseInt(j,10),b=a.substr(i-j-1,j),c=b.split("&");for(var l=c.length-1;l>-1;l--)h=c[l].split("="),k[d(h[0])]=d(h[1]);return{content:a.substr(0,a.length-j-f.length+i-1),ext:k}},p=function(a){var b=a?new Date(a):new Date,c=b.getMonth()+1,d=b.getDate(),e=b.getFullYear();return e+"-"+(10>c?"0"+c:c)+"-"+(10>d?"0"+d:d)},q=function(a){if(!(j.length<1)){var b,c,d=[],e=+new Date;for(b in localStorage)0===b.indexOf(h)&&(c=o(localStorage[b]),c.ext._key=b,c.ext.expire<=e?j.removeItem(b):d.push(c.ext));if(a&&!(d.length<1)){d.sort(function(a,b){return a.stamp-b.stamp});var f=d[0],g=p(),i=p(f.stamp);if(i==g)return j.removeItem(f._key);for(var k=d.length;k>-1;k--)if(f=d[k],i==p(f.stamp))return j.removeItem(f._key)}}},r=function(a,b,c){b=b||"",a=h+a,c=c||{};try{return localStorage.setItem(a,n(b,c)),!0}catch(d){return d.name.toUpperCase().indexOf("QUOTA")>=0?(q(!0),r(a,b,c)):!1}},s=function(b){b.content&&(a.execScript||function(b){a.eval.call(a,b)})(b.content)},t={"default":s},u=function(a){return a.ext.type&&t[a.ext.type]?t[a.type](a):t["default"](a)},v={};v.isValidItem=null,v.get=function(a){return a=h+a,o(j.getItem(a))},v.set=function(a,b,c){if(a){var d=x(c||{});return r(a,b,d)}return!1},v.remove=function(a){return a=h+a,j.removeItem(a),this},v.clear=function(a){if(a)q();else for(var b in localStorage)0===b.indexOf(h)&&j.removeItem(b);return this};var w=function(a,b){return!a||a.ext.expire-+new Date<0||b.unique!=a.ext.unique||v.isValidItem&&!v.isValidItem(a,b)},x=function(a,b){b=b||{};var c=+new Date;return a.originalType=b.type||"",a.type=a.type||a.originalType,a.stamp=c,a.expire=c+60*(a.expire||i)*60*1e3,a.hasOwnProperty("unique")&&(a.unique=a.unique||""),a},y=function(a){var b=k(),c=a._url;return delete a._url,m.send(c,{success:function(c){var d=x(a,c);a.skipCache||r(a.key,c.content,d),b.resolve({ext:a,content:c.content})},error:function(a){b.reject(a)}}),b.promise()},z=function(a){if(a.url){var b,c,d;if(a.key=a.key||a.url,b=v.get(a.key),a.execute=a.execute!==!1,d=w(b,a),a._url=a.url,a.live||d)a.unique&&(a._url+=(a.url.indexOf("?")>0?"&":"?")+"localcheck-unique="+a.unique),c=y(a);else{b.ext.type=a.type||b.ext.originalType,b.ext.execute=a.execute;var e=k();e.resolve(b),c=e.promise()}return c}},A=function(a,b){var c=l(a);if("string"==c)b[a]={url:a};else if("array"==c)for(var d=0,e=a.length;e>d;d++)A(a[d],b);else"object"==c&&a.url&&(b[a.url]=a)};return v.require=function(){if(!(arguments.length<1)){for(var a,b=k(),c={},d=0,e=arguments.length;e>d;d++)a=arguments[d],A(a,c);var f=[];for(var g in c)c.hasOwnProperty(g)&&f.push(z(c[g]));return k.all(f).done(function(a){for(var c=0,d=a.length;d>c;c++)u(a[c]);b.resolve(a)}),b.promise()}},v.clear(!0),a.LocalCheck=v,v}(this,document);